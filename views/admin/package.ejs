<%- include('header') %>

<main class="container">
  <button type="button" class="btn btn-primary mb-1" data-toggle="modal" data-target="#updatePackage">
    Update
  </button>
  <h1 class="text-left font-weight-bold bg-dark py-1 px-3 my-3 w-50 rounded-pill"><%= package.PackageNum %></h1>
  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-4">
    <p class="lead col"><strong>Value:</strong> $<%= package.pValue %></p>
    <p class="lead col"><strong>Weight:</strong> <%= package.Weight%> Kg</p>
    <p class="lead col"><strong>Category:</strong> <%= package.Category%></p>
  </div>
  <p class="lead"><strong>Insurance Amount:</strong> $<%= Math.round(package.Insurance_amount * 100) / 100%></p>
  <h4>Dimensions</h4>
  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-4">
    <p class="lead col"><strong>Width:</strong> <%= package.Width%> cm</p>
    <p class="lead col"><strong>Width:</strong> <%= package.Height%> cm</p>
    <p class="lead col"><strong>Width:</strong> <%= package.Length%> cm</p>
  </div>
  <hr>
  <p class="lead"><strong>Final Delivery Date:</strong> <%= package.FinalDeliveryDate%></p>
  <h2 class="mb-2">The traceback of the package: </h2>
  <table class="table table-striped table-dark">
    <thead>
      <tr>
        <th scope="col">Date</th>
        <th scope="col">Location</th>
      </tr>
    </thead>
    <tbody>
      <% if (package.tracers.length) { %>
        <% package.tracers.forEach( tracer => { %>
          <tr>
            <th scope="row"><%= tracer.Date%></th>
            <% if (tracer.City) { %>
            <td><%= tracer.City %></td>
            <% } else if (tracer.PlaneCompany) { %>
              <td><%= tracer.PlaneCompany %>'s Plane</td>
            <%} else { %>
              <td>Truck (LicensePlateNo: <%= tracer.LicensePlateNo %>)</td>
            <% } %>
          </tr>
        <% }) %>
        <%} else { %>
          <tr>
            <td colspan="2"> No tracebacks right now</td>
          </tr>
        <% } %>

    </tbody>
  </table>
</main>

<style>
  main{
    color: white;
  }
</style>

<%- include('modals/updatePackage') %>

<%- include('../footer.ejs') %>
